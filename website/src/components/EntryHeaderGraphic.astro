---
/**
 * EntryHeaderGraphic.astro
 * Decorative background graphics for lore entry headers
 * Each category has a unique visual motif
 */

interface Props {
  category: string;
}

const { category } = Astro.props;
---

<div class="entry-graphic" aria-hidden="true">
  {category === "architecture" && (
    <svg class="entry-graphic__svg" viewBox="0 0 400 200" preserveAspectRatio="xMaxYMid slice">
      <!-- Pagoda silhouettes -->
      <g opacity="0.08" fill="currentColor">
        <path d="M320 200 L320 100 L280 120 L280 200 Z" />
        <path d="M260 120 L300 90 L340 120 Z" />
        <path d="M270 90 L300 70 L330 90 Z" />
        <path d="M280 70 L300 55 L320 70 Z" />
      </g>
      <!-- Decorative gears -->
      <g opacity="0.06" stroke="currentColor" fill="none" stroke-width="2">
        <circle cx="380" cy="180" r="30" />
        <circle cx="380" cy="180" r="12" />
        <circle cx="350" cy="150" r="20" />
        <circle cx="350" cy="150" r="8" />
      </g>
      <!-- Grid pattern -->
      <g opacity="0.04" stroke="currentColor" stroke-width="0.5">
        <line x1="200" y1="150" x2="400" y2="150" />
        <line x1="220" y1="170" x2="400" y2="170" />
        <line x1="250" y1="130" x2="400" y2="130" />
      </g>
    </svg>
  )}

  {category === "characters" && (
    <svg class="entry-graphic__svg" viewBox="0 0 400 200" preserveAspectRatio="xMaxYMid slice">
      <!-- Cat silhouettes -->
      <g opacity="0.07" fill="currentColor">
        <!-- Sitting cat -->
        <ellipse cx="350" cy="160" rx="25" ry="20" />
        <ellipse cx="350" cy="130" rx="18" ry="16" />
        <path d="M335 120 L330 100 L340 115 Z" />
        <path d="M365 120 L370 100 L360 115 Z" />
        <!-- Walking cat silhouette -->
        <ellipse cx="280" cy="175" rx="30" ry="15" />
        <ellipse cx="260" cy="165" rx="12" ry="10" />
        <path d="M250 160 L246 148 L254 158 Z" />
        <path d="M270 160 L274 148 L266 158 Z" />
        <!-- Tail -->
        <path d="M310 175 Q330 160 325 145" stroke="currentColor" stroke-width="6" fill="none" stroke-linecap="round" />
      </g>
      <!-- Decorative circles (like family crests) -->
      <g opacity="0.05" stroke="currentColor" fill="none" stroke-width="1.5">
        <circle cx="380" cy="50" r="25" />
        <circle cx="380" cy="50" r="18" />
        <circle cx="380" cy="50" r="8" />
      </g>
    </svg>
  )}

  {category === "cuisine" && (
    <svg class="entry-graphic__svg" viewBox="0 0 400 200" preserveAspectRatio="xMaxYMid slice">
      <!-- Fish -->
      <g opacity="0.08" fill="currentColor">
        <ellipse cx="340" cy="100" rx="35" ry="18" />
        <path d="M375 100 L400 80 L400 120 Z" />
        <ellipse cx="360" cy="140" rx="25" ry="12" transform="rotate(-20 360 140)" />
        <path d="M385 140 L405 125 L405 155 Z" transform="rotate(-20 360 140)" />
      </g>
      <!-- Chopsticks -->
      <g opacity="0.06" stroke="currentColor" stroke-width="3" stroke-linecap="round">
        <line x1="280" y1="40" x2="330" y2="180" />
        <line x1="295" y1="35" x2="345" y2="175" />
      </g>
      <!-- Steam wisps -->
      <g opacity="0.05" stroke="currentColor" stroke-width="2" fill="none">
        <path d="M250 160 Q245 140 255 120 Q265 100 255 80" />
        <path d="M270 165 Q265 145 275 125 Q285 105 275 85" />
        <path d="M290 160 Q285 140 295 120 Q305 100 295 80" />
      </g>
      <!-- Bowl -->
      <ellipse cx="320" cy="175" rx="40" ry="15" opacity="0.07" fill="currentColor" />
    </svg>
  )}

  {category === "culture" && (
    <svg class="entry-graphic__svg" viewBox="0 0 400 200" preserveAspectRatio="xMaxYMid slice">
      <!-- Fan shape -->
      <g opacity="0.08" fill="currentColor">
        <path d="M380 200 L300 80 Q340 40 400 80 Z" />
      </g>
      <!-- Fan ribs -->
      <g opacity="0.04" stroke="currentColor" stroke-width="0.8">
        <line x1="380" y1="200" x2="320" y2="90" />
        <line x1="380" y1="200" x2="340" y2="70" />
        <line x1="380" y1="200" x2="360" y2="60" />
        <line x1="380" y1="200" x2="380" y2="60" />
        <line x1="380" y1="200" x2="400" y2="70" />
      </g>
      <!-- Cherry blossoms -->
      <g opacity="0.1" fill="currentColor">
        <circle cx="320" cy="100" r="8" />
        <circle cx="345" cy="85" r="6" />
        <circle cx="360" cy="110" r="7" />
        <circle cx="335" cy="130" r="5" />
        <circle cx="300" cy="120" r="4" />
      </g>
      <!-- Brush stroke -->
      <path d="M250 180 Q280 160 320 150 Q360 140 380 160" 
            stroke="currentColor" stroke-width="4" fill="none" opacity="0.06" stroke-linecap="round" />
    </svg>
  )}

  {category === "factions" && (
    <svg class="entry-graphic__svg" viewBox="0 0 400 200" preserveAspectRatio="xMaxYMid slice">
      <!-- Banner -->
      <g opacity="0.08" fill="currentColor">
        <rect x="360" y="20" width="8" height="180" rx="2" />
        <path d="M368 30 L400 40 Q395 100 400 160 L368 170 Z" />
      </g>
      <!-- Paw print mon -->
      <g opacity="0.1" fill="currentColor" transform="translate(375, 85)">
        <ellipse cx="0" cy="12" rx="10" ry="8" />
        <ellipse cx="-8" cy="0" rx="4" ry="5" />
        <ellipse cx="0" cy="-5" rx="4" ry="4" />
        <ellipse cx="8" cy="0" rx="4" ry="5" />
      </g>
      <!-- Secondary banners hint -->
      <g opacity="0.04" stroke="currentColor" fill="none" stroke-width="1">
        <rect x="320" y="40" width="5" height="140" rx="1" />
        <path d="M325 50 L300 55 Q305 110 300 155 L325 160" />
        <rect x="280" y="50" width="4" height="120" rx="1" />
        <path d="M284 58 L265 62 Q268 100 265 142 L284 146" />
      </g>
    </svg>
  )}

  {category === "flora" && (
    <svg class="entry-graphic__svg" viewBox="0 0 400 200" preserveAspectRatio="xMaxYMid slice">
      <!-- Bamboo stalks -->
      <g opacity="0.08" fill="currentColor">
        <rect x="350" y="0" width="12" height="200" rx="3" />
        <rect x="350" y="40" width="12" height="3" opacity="0.5" />
        <rect x="350" y="100" width="12" height="3" opacity="0.5" />
        <rect x="350" y="160" width="12" height="3" opacity="0.5" />
        <rect x="380" y="20" width="10" height="180" rx="3" />
        <rect x="380" y="70" width="10" height="3" opacity="0.5" />
        <rect x="380" y="130" width="10" height="3" opacity="0.5" />
      </g>
      <!-- Bamboo leaves -->
      <g opacity="0.06" fill="currentColor">
        <path d="M362 40 Q380 30 400 45 Q385 50 362 40" />
        <path d="M362 100 Q390 85 410 110 Q385 105 362 100" />
        <path d="M345 60 Q320 50 310 70 Q330 65 345 60" />
      </g>
      <!-- Glowing mushrooms -->
      <g opacity="0.08">
        <ellipse cx="300" cy="180" rx="15" ry="6" fill="currentColor" />
        <path d="M300 180 L300 165" stroke="currentColor" stroke-width="4" />
        <ellipse cx="300" cy="162" rx="12" ry="8" fill="currentColor" />
        <ellipse cx="300" cy="160" rx="8" ry="5" fill="currentColor" opacity="0.3" class="glow-pulse" />
      </g>
      <!-- Cherry blossoms -->
      <g opacity="0.1" fill="currentColor" class="float-petals">
        <circle cx="280" cy="60" r="5" />
        <circle cx="320" cy="45" r="4" />
        <circle cx="260" cy="90" r="3" />
      </g>
    </svg>
  )}

  {category === "general" && (
    <svg class="entry-graphic__svg" viewBox="0 0 400 200" preserveAspectRatio="xMaxYMid slice">
      <!-- Scroll -->
      <g opacity="0.08" fill="currentColor">
        <rect x="300" y="30" width="80" height="140" rx="3" />
        <ellipse cx="300" cy="100" rx="8" ry="70" />
        <ellipse cx="380" cy="100" rx="8" ry="70" />
      </g>
      <!-- Text lines -->
      <g opacity="0.04" stroke="currentColor" stroke-width="1">
        <line x1="315" y1="50" x2="365" y2="50" />
        <line x1="315" y1="70" x2="355" y2="70" />
        <line x1="315" y1="90" x2="365" y2="90" />
        <line x1="315" y1="110" x2="350" y2="110" />
        <line x1="315" y1="130" x2="360" y2="130" />
      </g>
      <!-- Paw seal -->
      <g opacity="0.12" fill="currentColor" transform="translate(330, 150)">
        <rect x="-12" y="-12" width="24" height="24" rx="3" />
      </g>
      <g opacity="0.2" fill="var(--color-bg-primary)" transform="translate(330, 150)">
        <ellipse cx="0" cy="4" rx="6" ry="4" />
        <ellipse cx="-5" cy="-4" rx="2.5" ry="3" />
        <ellipse cx="0" cy="-6" rx="2.5" ry="2.5" />
        <ellipse cx="5" cy="-4" rx="2.5" ry="3" />
      </g>
    </svg>
  )}

  {category === "history" && (
    <svg class="entry-graphic__svg" viewBox="0 0 400 200" preserveAspectRatio="xMaxYMid slice">
      <!-- Hourglass -->
      <g opacity="0.08" fill="currentColor">
        <rect x="330" y="20" width="60" height="12" rx="3" />
        <rect x="330" y="168" width="60" height="12" rx="3" />
        <path d="M340 32 Q340 80 360 100 Q380 80 380 32" />
        <path d="M340 168 Q340 120 360 100 Q380 120 380 168" />
      </g>
      <!-- Sand -->
      <g opacity="0.1" fill="currentColor">
        <path d="M348 45 Q360 70 352 85 Q360 80 368 85 Q360 70 372 45 Z" />
        <path d="M350 155 Q360 140 370 155 Z" />
      </g>
      <!-- Gears (time mechanism) -->
      <g opacity="0.05" stroke="currentColor" fill="none" stroke-width="1.5">
        <circle cx="290" cy="60" r="20" />
        <circle cx="290" cy="60" r="8" />
        <circle cx="280" cy="140" r="15" />
        <circle cx="280" cy="140" r="6" />
      </g>
      <!-- Era markings -->
      <g opacity="0.06" font-size="14" fill="currentColor" font-family="serif">
        <text x="300" y="100">古</text>
        <text x="395" y="100">今</text>
      </g>
    </svg>
  )}

  {category === "locations" && (
    <svg class="entry-graphic__svg" viewBox="0 0 400 200" preserveAspectRatio="xMaxYMid slice">
      <!-- Map outline -->
      <g opacity="0.06" fill="currentColor">
        <path d="M280 40 Q300 30 340 50 Q380 70 390 100 Q400 150 360 180 Q320 200 280 180 Q260 150 270 100 Q275 60 280 40" />
      </g>
      <!-- Terrain lines -->
      <g opacity="0.04" stroke="currentColor" stroke-width="1" fill="none">
        <path d="M290 80 Q310 70 330 85 Q350 100 370 90" />
        <path d="M285 120 Q320 110 350 130 Q375 150 390 140" />
      </g>
      <!-- Location markers (cat ears) -->
      <g opacity="0.1" fill="currentColor">
        <g transform="translate(320, 70)">
          <path d="M0 8 L-4 -4 L0 2 L4 -4 Z" />
          <circle cx="0" cy="12" r="5" />
        </g>
        <g transform="translate(355, 120)">
          <path d="M0 6 L-3 -3 L0 1.5 L3 -3 Z" />
          <circle cx="0" cy="9" r="4" />
        </g>
        <g transform="translate(300, 150)">
          <path d="M0 6 L-3 -3 L0 1.5 L3 -3 Z" />
          <circle cx="0" cy="9" r="4" />
        </g>
      </g>
      <!-- Compass -->
      <g opacity="0.08" transform="translate(380, 40)">
        <circle cx="0" cy="0" r="15" fill="none" stroke="currentColor" stroke-width="1" />
        <path d="M0 -12 L2 0 L0 12 L-2 0 Z" fill="currentColor" />
      </g>
    </svg>
  )}

  {category === "politics" && (
    <svg class="entry-graphic__svg" viewBox="0 0 400 200" preserveAspectRatio="xMaxYMid slice">
      <!-- Castle silhouette -->
      <g opacity="0.08" fill="currentColor">
        <rect x="300" y="120" width="90" height="80" rx="2" />
        <rect x="315" y="80" width="60" height="45" />
        <rect x="335" y="50" width="20" height="35" />
        <path d="M330 55 L345 30 L360 55 Z" />
        <path d="M310 85 L325 65 L340 85 Z" />
        <path d="M350 85 L365 65 L380 85 Z" />
      </g>
      <!-- Windows -->
      <g opacity="0.15" fill="var(--color-bg-primary)">
        <rect x="340" y="60" width="10" height="15" rx="1" />
        <rect x="320" y="95" width="8" height="12" rx="1" />
        <rect x="340" y="95" width="8" height="12" rx="1" />
        <rect x="360" y="95" width="8" height="12" rx="1" />
      </g>
      <!-- Gate -->
      <path d="M335 200 L335 160 Q345 150 355 160 L355 200" fill="var(--color-bg-primary)" opacity="0.15" />
      <!-- Shield/crest -->
      <g opacity="0.06" fill="currentColor">
        <path d="M280 60 L280 100 Q280 130 260 150 Q240 130 240 100 L240 60 Q260 50 280 60" />
      </g>
    </svg>
  )}

  {category === "professions" && (
    <svg class="entry-graphic__svg" viewBox="0 0 400 200" preserveAspectRatio="xMaxYMid slice">
      <!-- Tools -->
      <g opacity="0.08" fill="currentColor">
        <!-- Hammer -->
        <rect x="300" y="40" width="10" height="80" rx="2" />
        <rect x="285" y="30" width="40" height="20" rx="3" />
        <!-- Gear -->
        <circle cx="370" cy="100" r="25" fill="none" stroke="currentColor" stroke-width="8" />
        <circle cx="370" cy="100" r="10" />
      </g>
      <!-- Gear teeth -->
      <g opacity="0.08" fill="currentColor">
        <rect x="365" y="70" width="10" height="12" rx="2" />
        <rect x="365" y="118" width="10" height="12" rx="2" />
        <rect x="340" y="95" width="12" height="10" rx="2" />
        <rect x="388" y="95" width="12" height="10" rx="2" />
      </g>
      <!-- Workbench -->
      <rect x="280" y="160" width="110" height="15" rx="2" opacity="0.06" fill="currentColor" />
      <!-- Sparks -->
      <g opacity="0.1" fill="currentColor" class="sparks">
        <circle cx="320" cy="90" r="2" />
        <circle cx="335" cy="85" r="1.5" />
        <circle cx="310" cy="95" r="1" />
      </g>
      <!-- Paw on tool -->
      <g opacity="0.08" fill="currentColor" transform="translate(295, 130)">
        <ellipse cx="12" cy="8" rx="12" ry="8" />
        <ellipse cx="4" cy="0" rx="4" ry="5" />
        <ellipse cx="12" cy="-3" rx="4" ry="4" />
        <ellipse cx="20" cy="0" rx="4" ry="5" />
      </g>
    </svg>
  )}

  {category === "society" && (
    <svg class="entry-graphic__svg" viewBox="0 0 400 200" preserveAspectRatio="xMaxYMid slice">
      <!-- Group of cats -->
      <g opacity="0.07" fill="currentColor">
        <!-- Cat 1 (center, larger) -->
        <ellipse cx="340" cy="140" rx="25" ry="18" />
        <ellipse cx="340" cy="115" rx="18" ry="14" />
        <path d="M325 108 L320 90 L330 103 Z" />
        <path d="M355 108 L360 90 L350 103 Z" />
        <!-- Cat 2 (left) -->
        <ellipse cx="290" cy="155" rx="18" ry="14" />
        <ellipse cx="290" cy="138" rx="14" ry="11" />
        <path d="M278 132 L274 118 L283 128 Z" />
        <path d="M302 132 L306 118 L297 128 Z" />
        <!-- Cat 3 (right) -->
        <ellipse cx="385" cy="150" rx="16" ry="12" />
        <ellipse cx="385" cy="135" rx="12" ry="10" />
        <path d="M375 130 L371 118 L379 127 Z" />
        <path d="M395 130 L399 118 L391 127 Z" />
      </g>
      <!-- Connection lines (community bonds) -->
      <g opacity="0.04" stroke="currentColor" stroke-width="1" stroke-dasharray="3,3">
        <line x1="340" y1="130" x2="290" y2="145" />
        <line x1="340" y1="130" x2="385" y2="140" />
      </g>
      <!-- Background circle (community) -->
      <circle cx="340" cy="140" r="70" fill="none" stroke="currentColor" stroke-width="1" opacity="0.04" />
    </svg>
  )}

  {category === "technology" && (
    <svg class="entry-graphic__svg" viewBox="0 0 400 200" preserveAspectRatio="xMaxYMid slice">
      <!-- Large gear -->
      <g opacity="0.08" class="gear-rotate">
        <circle cx="350" cy="100" r="45" fill="none" stroke="currentColor" stroke-width="10" />
        <circle cx="350" cy="100" r="18" fill="currentColor" />
        <!-- Teeth -->
        <g fill="currentColor">
          <rect x="342" y="45" width="16" height="18" rx="3" />
          <rect x="342" y="137" width="16" height="18" rx="3" />
          <rect x="295" y="92" width="18" height="16" rx="3" />
          <rect x="387" y="92" width="18" height="16" rx="3" />
        </g>
      </g>
      <!-- Small gear -->
      <g opacity="0.06" class="gear-rotate-reverse">
        <circle cx="280" cy="160" r="25" fill="none" stroke="currentColor" stroke-width="6" />
        <circle cx="280" cy="160" r="10" fill="currentColor" />
        <g fill="currentColor">
          <rect x="274" y="130" width="12" height="12" rx="2" />
          <rect x="274" y="178" width="12" height="12" rx="2" />
          <rect x="250" y="154" width="12" height="12" rx="2" />
          <rect x="298" y="154" width="12" height="12" rx="2" />
        </g>
      </g>
      <!-- Steam pipes -->
      <g opacity="0.06" stroke="currentColor" stroke-width="6" fill="none" stroke-linecap="round">
        <path d="M260 40 L260 80 Q260 100 280 100" />
        <path d="M300 30 L300 60" />
      </g>
      <!-- Steam puffs -->
      <g opacity="0.05" fill="currentColor" class="steam-rise">
        <circle cx="260" cy="30" r="5" />
        <circle cx="255" cy="20" r="4" />
        <circle cx="300" cy="20" r="5" />
        <circle cx="295" cy="10" r="3" />
      </g>
      <!-- Gauge -->
      <g opacity="0.08" transform="translate(380, 170)">
        <circle cx="0" cy="0" r="15" fill="var(--color-bg-primary)" stroke="currentColor" stroke-width="2" />
        <path d="M0 0 L0 -10" stroke="currentColor" stroke-width="2" transform="rotate(45)" />
        <circle cx="0" cy="0" r="3" fill="currentColor" />
      </g>
    </svg>
  )}

  {category === "world" && (
    <svg class="entry-graphic__svg" viewBox="0 0 400 200" preserveAspectRatio="xMaxYMid slice">
      <!-- Globe -->
      <circle cx="340" cy="100" r="60" fill="none" stroke="currentColor" stroke-width="2" opacity="0.08" />
      <!-- Cat ears on globe -->
      <g opacity="0.1" fill="currentColor">
        <path d="M295 65 L280 35 L305 55 Z" />
        <path d="M385 65 L400 35 L375 55 Z" />
        <path d="M297 62 L285 40 L302 55 Z" opacity="0.4" />
        <path d="M383 62 L395 40 L378 55 Z" opacity="0.4" />
      </g>
      <!-- Latitude/Longitude -->
      <g opacity="0.04" stroke="currentColor" stroke-width="1" fill="none">
        <ellipse cx="340" cy="100" rx="60" ry="20" />
        <ellipse cx="340" cy="100" rx="60" ry="40" />
        <ellipse cx="340" cy="100" rx="20" ry="60" />
        <line x1="280" y1="100" x2="400" y2="100" />
      </g>
      <!-- Continents (stylized) -->
      <g opacity="0.08" fill="currentColor">
        <path d="M310 80 Q320 70 340 75 Q355 85 345 100 Q330 95 310 80" />
        <path d="M355 90 Q370 85 380 100 Q375 120 360 115 Q350 105 355 90" />
        <path d="M320 115 Q335 110 350 120 Q345 135 330 130 Q315 125 320 115" />
      </g>
      <!-- Stand arc -->
      <path d="M290 170 Q280 100 290 30" stroke="currentColor" stroke-width="2" fill="none" opacity="0.06" />
      <!-- Base -->
      <ellipse cx="340" cy="180" rx="30" ry="8" fill="currentColor" opacity="0.06" />
    </svg>
  )}
</div>

<style>
  .entry-graphic {
    position: absolute;
    top: 0;
    right: 0;
    width: 50%;
    height: 100%;
    overflow: hidden;
    pointer-events: none;
    color: var(--category-color);
  }

  .entry-graphic__svg {
    width: 100%;
    height: 100%;
    opacity: 1;
  }

  /* Animations */
  .gear-rotate {
    animation: gear-spin 30s linear infinite;
    transform-origin: 350px 100px;
  }

  .gear-rotate-reverse {
    animation: gear-spin 20s linear infinite reverse;
    transform-origin: 280px 160px;
  }

  @keyframes gear-spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  .glow-pulse {
    animation: glow 2s ease-in-out infinite;
  }

  @keyframes glow {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 0.6; }
  }

  .float-petals circle {
    animation: petal-float 8s ease-in-out infinite;
  }

  .float-petals circle:nth-child(2) { animation-delay: -2s; }
  .float-petals circle:nth-child(3) { animation-delay: -4s; }

  @keyframes petal-float {
    0%, 100% { transform: translateY(0) translateX(0); }
    50% { transform: translateY(-10px) translateX(5px); }
  }

  .steam-rise circle {
    animation: steam 3s ease-out infinite;
  }

  .steam-rise circle:nth-child(2) { animation-delay: 0.5s; }
  .steam-rise circle:nth-child(3) { animation-delay: 1s; }
  .steam-rise circle:nth-child(4) { animation-delay: 1.5s; }

  @keyframes steam {
    0% { opacity: 0.05; transform: translateY(0) scale(1); }
    100% { opacity: 0; transform: translateY(-20px) scale(1.5); }
  }

  .sparks circle {
    animation: spark 1.5s ease-out infinite;
  }

  .sparks circle:nth-child(2) { animation-delay: 0.3s; }
  .sparks circle:nth-child(3) { animation-delay: 0.6s; }

  @keyframes spark {
    0%, 100% { opacity: 0; transform: scale(0); }
    50% { opacity: 0.1; transform: scale(1); }
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .gear-rotate,
    .gear-rotate-reverse,
    .glow-pulse,
    .float-petals circle,
    .steam-rise circle,
    .sparks circle {
      animation: none;
    }
  }

  /* Responsive */
  @media (max-width: 768px) {
    .entry-graphic {
      width: 40%;
      opacity: 0.7;
    }
  }

  @media (max-width: 480px) {
    .entry-graphic {
      display: none;
    }
  }
</style>
